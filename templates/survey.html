{% extends 'base.html' %}
{% block title %}
Survey
{% endblock %}
{% block scripts %}
<!-- <script src="{{url_for('static', filename='handle_survey.js')}}"></script> -->
{% endblock %}
{% set active_page = 'survey'%}
{% block content %}
<p>
    Welcome to the survey portal.<br>
    Please rate the following movies.<br>
    Check "No idea" if you haven't yet seen the movie. <br>
    Click "Done" to finish the survey and get your recommendations.
</p>
<form class="done-form" id="done-form" method="post" action="">
    <input type="hidden" name="formtype" value="1">
    <input type="submit" class="done-button" name="done" id="done-button" value="Done">
</form>
<form class="reset-form" id="reset-form" method="post" action="">
    <input type="hidden" name="formtype" value="3">
    <input type="submit" class="done-button" name="reset" id="reset-button" value="Reset My Ratings">
</form>
<div class="poster-and-rating">
    <div class="posterrow">
        {% for item in poster_urls %}
        <div class="column">
            <div class="column-img">
                <img src="{{item.poster_url}}" class="posters">
            </div>
            <form class="survey-form" method="post">
                <input type="hidden" name="item_id" value="{{item.id}}">
                <div class="slidecontainer">
                    <input type="range" name="rating" min="0" max="5" step="0.5" value="2.5" class="slider" id="myRange">
                    <p id="progress"></p>
                </div>
                <input type="checkbox" name="no_rating" id="dontknow{{item.id}}">
                <label for="dontknow{{item.id}}">No idea</label>
                <input type="hidden" name="formtype" value="2">
                <input type="submit" class="submit-button">
            </form>
        </div>
        {% endfor %}
    </div>
</div>
<script>
var slider = document.getElementById("myRange");
var output = document.getElementById("progress");
output.innerHTML = slider.value;

slider.oninput = function() {
    output.innerHTML = this.value;
}
</script>